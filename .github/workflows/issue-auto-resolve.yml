name: Issue Auto-Resolve

on:
  issues:
    types: [opened]

permissions:
  contents: write
  issues: write
  pull-requests: write

jobs:
  run-triage:
    if: github.event.sender.type != 'Bot'
    uses: JacobPEvans/ai-workflows/.github/workflows/issue-triage.yml@v0.2.4
    secrets: inherit

  resolve-issue:
    needs: run-triage
    if: github.event.sender.type != 'Bot'
    uses: JacobPEvans/ai-workflows/.github/workflows/issue-resolver.yml@v0.2.4
    secrets: inherit
    with:
      repo_context: "NixOS/nix-darwin system configuration using flakes"
      extra_tools: "Bash(nix:*)"
