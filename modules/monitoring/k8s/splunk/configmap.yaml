apiVersion: v1
kind: ConfigMap
metadata:
  name: splunk-config
  namespace: monitoring
  labels:
    app: splunk
data:
  # Minimal Splunk configuration for ARM64/Rosetta compatibility
  default.yml: |
    splunk:
      # Disable KVStore - MongoDB doesn't work under Rosetta 2 emulation
      kvstore:
        disabled: true
      # Enable HEC globally
      hec:
        enable: true
        port: 8088
        ssl: false
        token: ${SPLUNK_HEC_TOKEN}
